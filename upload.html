<!-- upload.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Multi File Upload</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    .progress { margin-top: 10px; width: 100%; background: #eee; height: 20px; border-radius: 5px; }
    .bar { height: 100%; background: green; width: 0%; color: white; text-align: center; }
  </style>
</head>
<body>
  <h2>Upload Multiple Files</h2>
  <form id="uploadForm">
    <input type="file" name="file" id="file" multiple>
    <br><br>
    <button type="submit">Upload</button>
  </form>
  <div class="progress"><div class="bar" id="progressBar">0%</div></div>
  <p id="status"></p>

<script>
document.getElementById('uploadForm').addEventListener('submit', function(e){
    e.preventDefault();
    var files = document.getElementById('file').files;
    if (files.length === 0) return alert("No file selected!");

    var formData = new FormData();
    for (var i = 0; i < files.length; i++) {
        formData.append("file", files[i]);
    }

    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/", true);

    xhr.upload.onprogress = function(e) {
        if (e.lengthComputable) {
            var percent = Math.round((e.loaded / e.total) * 100);
            var bar = document.getElementById("progressBar");
            bar.style.width = percent + "%";
            bar.textContent = percent + "%";
        }
    };

    xhr.onload = function() {
        if (xhr.status == 200) {
            document.getElementById("status").innerText = "Upload complete!";
        } else {
            document.getElementById("status").innerText = "Upload failed.";
        }
    };

    xhr.send(formData);
});
</script>
</body>
</html>
